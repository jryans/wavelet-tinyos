
<html>
<head>
<title>Component: CC2420ControlM</title>
</head>
<body>
<table BORDER="0" CELLPADDING="3" CELLSPACING="0" width="100%">
<tr><td>
<font size="-1">
<b><font color="blue"><a href="apps_p.html">Apps</a></font></b>
&nbsp;&nbsp;&nbsp;
<b><a href="components_p.html">Components</a></b>
&nbsp;&nbsp;&nbsp;
<b><a href="interfaces_p.html">Interfaces</a></b>
&nbsp;&nbsp;&nbsp;
<b><a href="allfiles_p.html">All Files</a></b>
&nbsp;&nbsp;&nbsp;
<b><a href="index.html">Source Tree</a></b>
&nbsp;&nbsp;&nbsp;
</font>
</td>
<td align="right">
<font size="-1">
source: <b><a href="tos.lib.CC2420Radio.CC2420ControlM.nc.source">tos.lib.CC2420Radio.CC2420ControlM.nc</a></b>
</font>
</td></tr></table>
<hr>

<h1 align="center">Component: CC2420ControlM</h1>
<p>

 <table border="0" cellpadding="0">
<tr valign="top"><td><b>Author:</b>
<td> Alan Broad, Crossbow
 </td></tr>
<tr valign="top"><td>&nbsp;</td>
<td> Joe Polastre
</td></tr></table>

<p>

<table BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<tr BGCOLOR="#CCCCFF"><td>
<h3>Required Interfaces</h3></td></tr></table>
<ul>
<li>    <a href="tos.interfaces.StdControl.nc.html">StdControl</a> HPLChipconControl
<li>    <a href="tos.lib.CC2420Radio.HPLCC2420.nc.html">HPLCC2420</a> HPLChipcon
<li>    <a href="tos.lib.CC2420Radio.HPLCC2420RAM.nc.html">HPLCC2420RAM</a> HPLChipconRAM
<li>    <a href="tos.lib.CC2420Radio.HPLCC2420Interrupt.nc.html">HPLCC2420Interrupt</a> CCA
</ul>

<table BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<tr BGCOLOR="#CCCCFF"><td>
<h3>Provided Interfaces</h3></td></tr></table>
<ul>
<li>    <a href="tos.interfaces.SplitControl.nc.html">SplitControl</a> 
<li>    <a href="tos.lib.CC2420Radio.CC2420Control.nc.html">CC2420Control</a> 
</ul>

<table BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<tr BGCOLOR="#CCCCFF"><td>
<h3>Variables</h3></td></tr></table>
<ul>
<li>   uint8_t state = 0
<li>   norace uint16_t gCurrentParameters[14]
</ul>

<table BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<tr BGCOLOR="#CCCCFF"><td>
<h3>Function Index</h3></td></tr></table>
<ul>
<li>
        bool <b>SetRegs</b>(void)
<menu>**********************************************************************
 SetRegs
  - Configure CC2420 registers with current values
  - Readback 1st register written to make sure electrical connection OK
***********************************************************************</menu><p>

<li>
        task void <b>taskInitDone</b>(void)

<li>
        task void <b>taskStopDone</b>(void)

<li>
        task void <b>PostOscillatorOn</b>(void)

<li>
        command result_t     <a href="tos.interfaces.SplitControl.nc.html#command result_t SplitControl.init(void)">
<b>SplitControl.init</b>    </a>
(void)
<menu>***********************************************************************
 Init CC2420 radio:

***********************************************************************</menu><p>

<li>
        command result_t     <a href="tos.interfaces.SplitControl.nc.html#command result_t SplitControl.stop(void)">
<b>SplitControl.stop</b>    </a>
(void)

<li>
        command result_t     <a href="tos.interfaces.SplitControl.nc.html#command result_t SplitControl.start(void)">
<b>SplitControl.start</b>    </a>
(void)
<menu>****************************************************************************
 Start CC2420 radio:
 -Turn on 1.8V voltage regulator, wait for power-up, 0.6msec
 -Release reset line
 -Enable CC2420 crystal,          wait for stabilization, 0.9 msec

****************************************************************************</menu><p>

<li>
        command result_t     <a href="#command result_t CC2420Control.TunePreset(uint8_t chnl)">
<b>CC2420Control.TunePreset</b>    </a>
(uint8_t chnl)
<menu>***********************************************************************
 TunePreset
 -Set CC2420 channel
 Valid channel values are 11 through 26.
</menu><p>

<li>
        command result_t     <a href="#command result_t CC2420Control.TuneManual(uint16_t DesiredFreq)">
<b>CC2420Control.TuneManual</b>    </a>
(uint16_t DesiredFreq)
<menu>***********************************************************************
 TuneManual
 Tune the radio to a given frequency.</menu><p>

<li>
        command uint16_t     <a href="tos.lib.CC2420Radio.CC2420Control.nc.html#command uint16_t CC2420Control.GetFrequency(void)">
<b>CC2420Control.GetFrequency</b>    </a>
(void)
<menu>***********************************************************************
 Get the current frequency of the radio
</menu><p>

<li>
        command uint8_t     <a href="tos.lib.CC2420Radio.CC2420Control.nc.html#command uint8_t CC2420Control.GetPreset(void)">
<b>CC2420Control.GetPreset</b>    </a>
(void)
<menu>***********************************************************************
 Get the current channel of the radio
</menu><p>

<li>
        async command result_t     <a href="#async command result_t CC2420Control.TxMode(void)">
<b>CC2420Control.TxMode</b>    </a>
(void)
<menu>***********************************************************************
 TxMode
 Shift the CC2420 Radio into transmit mode.
</menu><p>

<li>
        async command result_t     <a href="#async command result_t CC2420Control.TxModeOnCCA(void)">
<b>CC2420Control.TxModeOnCCA</b>    </a>
(void)
<menu>***********************************************************************
 TxModeOnCCA
 Shift the CC2420 Radio into transmit mode when the next clear channel
 is detected.

</menu><p>

<li>
        async command result_t     <a href="tos.lib.CC2420Radio.CC2420Control.nc.html#async command result_t CC2420Control.RxMode(void)">
<b>CC2420Control.RxMode</b>    </a>
(void)
<menu>***********************************************************************
 RxMode
 Shift the CC2420 Radio into receive mode 
***********************************************************************</menu><p>

<li>
        command result_t     <a href="tos.lib.CC2420Radio.CC2420Control.nc.html#command result_t CC2420Control.SetRFPower(uint8_t power)">
<b>CC2420Control.SetRFPower</b>    </a>
(uint8_t power)
<menu>***********************************************************************
 SetRFPower
 power = 31 => full power    (0dbm)
          3 => lowest power  (-25dbm)
 return SUCCESS if the radio power was successfully set
***********************************************************************</menu><p>

<li>
        command uint8_t     <a href="tos.lib.CC2420Radio.CC2420Control.nc.html#command uint8_t CC2420Control.GetRFPower(void)">
<b>CC2420Control.GetRFPower</b>    </a>
(void)
<menu>***********************************************************************
 GetRFPower
 return power seeting
***********************************************************************</menu><p>

<li>
        async command result_t     <a href="tos.lib.CC2420Radio.CC2420Control.nc.html#async command result_t CC2420Control.OscillatorOn(void)">
<b>CC2420Control.OscillatorOn</b>    </a>
(void)

<li>
        async command result_t     <a href="tos.lib.CC2420Radio.CC2420Control.nc.html#async command result_t CC2420Control.OscillatorOff(void)">
<b>CC2420Control.OscillatorOff</b>    </a>
(void)

<li>
        async command result_t     <a href="tos.lib.CC2420Radio.CC2420Control.nc.html#async command result_t CC2420Control.VREFOn(void)">
<b>CC2420Control.VREFOn</b>    </a>
(void)

<li>
        async command result_t     <a href="tos.lib.CC2420Radio.CC2420Control.nc.html#async command result_t CC2420Control.VREFOff(void)">
<b>CC2420Control.VREFOff</b>    </a>
(void)

<li>
        async command result_t     <a href="tos.lib.CC2420Radio.CC2420Control.nc.html#async command result_t CC2420Control.enableAutoAck(void)">
<b>CC2420Control.enableAutoAck</b>    </a>
(void)

<li>
        async command result_t     <a href="tos.lib.CC2420Radio.CC2420Control.nc.html#async command result_t CC2420Control.disableAutoAck(void)">
<b>CC2420Control.disableAutoAck</b>    </a>
(void)

<li>
        async command result_t     <a href="tos.lib.CC2420Radio.CC2420Control.nc.html#async command result_t CC2420Control.enableAddrDecode(void)">
<b>CC2420Control.enableAddrDecode</b>    </a>
(void)

<li>
        async command result_t     <a href="tos.lib.CC2420Radio.CC2420Control.nc.html#async command result_t CC2420Control.disableAddrDecode(void)">
<b>CC2420Control.disableAddrDecode</b>    </a>
(void)

<li>
        command result_t     <a href="tos.lib.CC2420Radio.CC2420Control.nc.html#command result_t CC2420Control.setShortAddress(uint16_t addr)">
<b>CC2420Control.setShortAddress</b>    </a>
(uint16_t addr)

<li>
        async event result_t     <a href="tos.lib.CC2420Radio.HPLCC2420RAM.nc.html#async event result_t HPLChipconRAM.readDone(uint16_t addr, uint8_t length, uint8_t *buffer)">
<b>HPLChipconRAM.readDone</b>    </a>
(uint16_t addr, uint8_t length, uint8_t *buffer)

<li>
        async event result_t     <a href="tos.lib.CC2420Radio.HPLCC2420RAM.nc.html#async event result_t HPLChipconRAM.writeDone(uint16_t addr, uint8_t length, uint8_t *buffer)">
<b>HPLChipconRAM.writeDone</b>    </a>
(uint16_t addr, uint8_t length, uint8_t *buffer)

<li>
        async event result_t     <a href="tos.lib.CC2420Radio.HPLCC2420Interrupt.nc.html#async event result_t CCA.fired(void)">
<b>CCA.fired</b>    </a>
(void)

</ul>

<table BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<tr BGCOLOR="#CCCCFF"><td>
<h3>Function Descriptions</h3>
</td></tr></table>
    <a name="command result_t CC2420Control.TunePreset(uint8_t chnl)"></a>
        <h4>CC2420Control.TunePreset</h4>
        command result_t     <a href="tos.lib.CC2420Radio.CC2420Control.nc.html#command result_t CC2420Control.TunePreset(uint8_t chnl)"><b>CC2420Control.TunePreset</b>    </a>
(uint8_t chnl)<P><menu>***********************************************************************
 TunePreset
 -Set CC2420 channel
 Valid channel values are 11 through 26.
 The channels are calculated by:
  Freq = 2405 + 5(k-11) MHz for k = 11,12,...,26
 chnl requested 802.15.4 channel 
 return Status of the tune operation
***********************************************************************</menu><hr>
    <a name="command result_t CC2420Control.TuneManual(uint16_t DesiredFreq)"></a>
        <h4>CC2420Control.TuneManual</h4>
        command result_t     <a href="tos.lib.CC2420Radio.CC2420Control.nc.html#command result_t CC2420Control.TuneManual(uint16_t DesiredFreq)"><b>CC2420Control.TuneManual</b>    </a>
(uint16_t DesiredFreq)<P><menu>***********************************************************************
 TuneManual
 Tune the radio to a given frequency. Frequencies may be set in
 1 MHz steps between 2400 MHz and 2483 MHz
 
 Desiredfreq The desired frequency, in MHz.
 Return Status of the tune operation
***********************************************************************</menu><hr>
    <a name="async command result_t CC2420Control.TxMode(void)"></a>
        <h4>CC2420Control.TxMode</h4>
        async command result_t     <a href="tos.lib.CC2420Radio.CC2420Control.nc.html#async command result_t CC2420Control.TxMode(void)"><b>CC2420Control.TxMode</b>    </a>
(void)<P><menu>***********************************************************************
 TxMode
 Shift the CC2420 Radio into transmit mode.
 return SUCCESS if the radio was successfully switched to TX mode.
***********************************************************************</menu><hr>
    <a name="async command result_t CC2420Control.TxModeOnCCA(void)"></a>
        <h4>CC2420Control.TxModeOnCCA</h4>
        async command result_t     <a href="tos.lib.CC2420Radio.CC2420Control.nc.html#async command result_t CC2420Control.TxModeOnCCA(void)"><b>CC2420Control.TxModeOnCCA</b>    </a>
(void)<P><menu>***********************************************************************
 TxModeOnCCA
 Shift the CC2420 Radio into transmit mode when the next clear channel
 is detected.

 return SUCCESS if the transmit request has been accepted
***********************************************************************</menu>