
<html>
<head>
<title>Component: StatsM</title>
</head>
<body>
<table BORDER="0" CELLPADDING="3" CELLSPACING="0" width="100%">
<tr><td>
<font size="-1">
<b><font color="blue"><a href="apps_p.html">Apps</a></font></b>
&nbsp;&nbsp;&nbsp;
<b><a href="components_p.html">Components</a></b>
&nbsp;&nbsp;&nbsp;
<b><a href="interfaces_p.html">Interfaces</a></b>
&nbsp;&nbsp;&nbsp;
<b><a href="allfiles_p.html">All Files</a></b>
&nbsp;&nbsp;&nbsp;
<b><a href="index.html">Source Tree</a></b>
&nbsp;&nbsp;&nbsp;
</font>
</td>
<td align="right">
<font size="-1">
source: <b><a href="apps.compass.StatsM.nc.source">apps.compass.StatsM.nc</a></b>
</font>
</td></tr></table>
<hr>

<h1 align="center">Component: StatsM</h1>
<table BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<tr BGCOLOR="#CCCCFF"><td>
<h3>Required Interfaces</h3></td></tr></table>
<ul>
<li>    <a href="tos.lib.Transceiver.Transceiver.nc.html">Transceiver</a> Snoop
<li>    <a href="apps.compass.Message.nc.html">Message</a> 
<li>    <a href="apps.compass.BigPackClient.nc.html">BigPackClient</a> WaveletPack
<li>    <a href="apps.compass.BigPackServer.nc.html">BigPackServer</a> StatsPack
<li>    <a href="apps.compass.SensorData.nc.html">SensorData</a> 
<li>    <a href="apps.compass.StatsArray.nc.html">StatsArray</a> RSSI
<li>    <a href="apps.compass.StatsArray.nc.html">StatsArray</a> LQI
</ul>

<table BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<tr BGCOLOR="#CCCCFF"><td>
<h3>Provided Interfaces</h3></td></tr></table>
<ul>
<li>    <a href="apps.compass.Stats.nc.html">Stats</a> 
<li>    <a href="tos.interfaces.StdControl.nc.html">StdControl</a> 
</ul>

<table BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<tr BGCOLOR="#CCCCFF"><td>
<h3>Variables</h3></td></tr></table>
<ul>
<li>   MoteStats data
<li>   bool wtAlloc
<li>   bool statsBP = FALSE
<li>   bool checkMsg(msgData msg)
        <br><menu>

 Filters out some message types from being counted in stats data.

</menu>
<li>   void waveletFree(void)
        <br><menu>

 Deallocates the wavelet configuration data.

</menu>
<li>   result_t populatePack(void)
        <br><menu>

 Fills in all the data structure descriptors needed by

 the BigPack protocol.

</menu>
<li>   void clearStats(void)
        <br><menu>

 Clears all stats data.

</menu>
</ul>

<table BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<tr BGCOLOR="#CCCCFF"><td>
<h3>Function Index</h3></td></tr></table>
<ul>
<li>
        command void     <a href="apps.compass.Stats.nc.html#command void Stats.file(StatsReport report)">
<b>Stats.file</b>    </a>
(StatsReport report)
<menu>

 Submits a new report.

</menu><p>

<li>
        command void     <a href="apps.compass.Stats.nc.html#command void Stats.clear(void)">
<b>Stats.clear</b>    </a>
(void)
<menu>

 Clears current stats data.

</menu><p>

<li>
        event result_t     <a href="tos.lib.Transceiver.Transceiver.nc.html#event result_t Snoop.radioSendDone(uint8_t id, TOS_MsgPtr m, result_t result)">
<b>Snoop.radioSendDone</b>    </a>
(uint8_t id, TOS_MsgPtr m, result_t result)
<menu>

 Stores details for each packet sent.

</menu><p>

<li>
        event result_t     <a href="tos.lib.Transceiver.Transceiver.nc.html#event result_t Snoop.uartSendDone(uint8_t id, TOS_MsgPtr m, result_t result)">
<b>Snoop.uartSendDone</b>    </a>
(uint8_t id, TOS_MsgPtr m, result_t result)
<menu>

 Stats doesn't track UART packets.

</menu><p>

<li>
        event TOS_MsgPtr     <a href="tos.lib.Transceiver.Transceiver.nc.html#event TOS_MsgPtr Snoop.receiveRadio(uint8_t id, TOS_MsgPtr m)">
<b>Snoop.receiveRadio</b>    </a>
(uint8_t id, TOS_MsgPtr m)
<menu>

 Stores details for each packet received.

</menu><p>

<li>
        event TOS_MsgPtr     <a href="tos.lib.Transceiver.Transceiver.nc.html#event TOS_MsgPtr Snoop.receiveUart(uint8_t id, TOS_MsgPtr m)">
<b>Snoop.receiveUart</b>    </a>
(uint8_t id, TOS_MsgPtr m)
<menu>

 Stats doesn't track UART packets.

</menu><p>

<li>
        event result_t     <a href="apps.compass.Message.nc.html#event result_t Message.sendDone(msgData msg, result_t result, uint8_t retries)">
<b>Message.sendDone</b>    </a>
(msgData msg, result_t result, uint8_t retries)

<li>
        event void     <a href="apps.compass.Message.nc.html#event void Message.receive(msgData msg)">
<b>Message.receive</b>    </a>
(msgData msg)

<li>
        event void     <a href="apps.compass.BigPackClient.nc.html#event void WaveletPack.requestDone(void *mainBlock, result_t result)">
<b>WaveletPack.requestDone</b>    </a>
(void *mainBlock, result_t result)
<menu>

 Stores wavelet node configuration to packets sent for each

 neighbor separately.

</menu><p>

<li>
        event void     <a href="#event void StatsPack.buildPack(void)">
<b>StatsPack.buildPack</b>    </a>
(void)
<menu>

 Begins assembling the requested pack by reading a new

 voltage value. </menu><p>

<li>
        event void     <a href="apps.compass.SensorData.nc.html#event void SensorData.readDone(float *newVals)">
<b>SensorData.readDone</b>    </a>
(float *newVals)
<menu>

 Once a new voltage value has been read in, the rest of the

 stats data is gathered and the pack is built.

</menu><p>

<li>
        result_t <b>populatePack</b>(void)
<menu>

 Fills in all the data structure descriptors needed by

 the BigPack protocol.

</menu><p>

<li>
        void <b>waveletFree</b>(void)
<menu>

 Deallocates the wavelet configuration data.

</menu><p>

<li>
        void <b>clearStats</b>(void)
<menu>

 Clears all stats data.

</menu><p>

<li>
        bool     <a href="#bool checkMsg(msgData msg)">
<b>checkMsg</b>    </a>
(msgData msg)
<menu>

 Filters out some message types from being counted in stats data.

</menu><p>

<li>
        command result_t     <a href="tos.interfaces.StdControl.nc.html#command result_t StdControl.init(void)">
<b>StdControl.init</b>    </a>
(void)

<li>
        command result_t     <a href="tos.interfaces.StdControl.nc.html#command result_t StdControl.start(void)">
<b>StdControl.start</b>    </a>
(void)

<li>
        command result_t     <a href="tos.interfaces.StdControl.nc.html#command result_t StdControl.stop(void)">
<b>StdControl.stop</b>    </a>
(void)

</ul>

<table BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<tr BGCOLOR="#CCCCFF"><td>
<h3>Function Descriptions</h3>
</td></tr></table>
    <a name="event void StatsPack.buildPack(void)"></a>
        <h4>StatsPack.buildPack</h4>
        event void     <a href="apps.compass.BigPackServer.nc.html#event void StatsPack.buildPack(void)"><b>StatsPack.buildPack</b>    </a>
(void)<P><menu>

 Begins assembling the requested pack by reading a new

 voltage value.  When this completes, the pack itself

 will actually be assembled.

</menu><hr>
    <a name="bool checkMsg(msgData msg)"></a>
        <h4>checkMsg</h4>
        bool <b>checkMsg</b>(msgData msg)<P><menu>

 Filters out some message types from being counted in stats data.

 Returns TRUE if the message should be counted and FALSE if not.

</menu>