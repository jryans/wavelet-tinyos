
<html>
<head>
<title>Component: DelugeMetadataM</title>
</head>
<body>
<table BORDER="0" CELLPADDING="3" CELLSPACING="0" width="100%">
<tr><td>
<font size="-1">
<b><font color="blue"><a href="apps_p.html">Apps</a></font></b>
&nbsp;&nbsp;&nbsp;
<b><a href="components_p.html">Components</a></b>
&nbsp;&nbsp;&nbsp;
<b><a href="interfaces_p.html">Interfaces</a></b>
&nbsp;&nbsp;&nbsp;
<b><a href="allfiles_p.html">All Files</a></b>
&nbsp;&nbsp;&nbsp;
<b><a href="index.html">Source Tree</a></b>
&nbsp;&nbsp;&nbsp;
</font>
</td>
<td align="right">
<font size="-1">
source: <b><a href="tos.lib.Deluge.DelugeMetadataM.nc.source">tos.lib.Deluge.DelugeMetadataM.nc</a></b>
</font>
</td></tr></table>
<hr>

<h1 align="center">Component: DelugeMetadataM</h1>
<p>

 <table border="0" cellpadding="0">
<tr valign="top"><td><b>Author:</b>
<td> Jonathan Hui <<a href="mailto:jwhui@cs.berkeley.edu">jwhui@cs.berkeley.edu</a>>
</td></tr></table>

<p>

<table BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<tr BGCOLOR="#CCCCFF"><td>
<h3>Required Interfaces</h3></td></tr></table>
<ul>
<li>    <a href="tos.interfaces.Crc.nc.html">Crc</a> 
<li>    <a href="tos.lib.Deluge.DelugeMetadataStore.nc.html">DelugeMetadataStore</a> MetadataStore
<li>    <a href="tos.lib.Deluge.DelugeDataRead.nc.html">DelugeDataRead</a> DataRead
<li>    <a href="tos.lib.Deluge.DelugeDataWrite.nc.html">DelugeDataWrite</a> DataWrite
<li>    <a href="tos.lib.Deluge.DelugeStorage.nc.html">DelugeStorage</a> 
<li>    <a href="tos.lib.Flash.FlashWP.nc.html">FlashWP</a> 
<li>    <a href="tos.interfaces.Leds.nc.html">Leds</a> 
<li>    <a href="tos.interfaces.Timer.nc.html">Timer</a> 
</ul>

<table BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<tr BGCOLOR="#CCCCFF"><td>
<h3>Provided Interfaces</h3></td></tr></table>
<ul>
<li>    <a href="tos.interfaces.SplitControl.nc.html">SplitControl</a> 
<li>    <a href="tos.lib.Deluge.DelugeMetadata.nc.html">DelugeMetadata</a> Metadata
<li>    <a href="tos.lib.Deluge.DelugeStats.nc.html">DelugeStats</a> 
</ul>

<table BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<tr BGCOLOR="#CCCCFF"><td>
<h3>Variables</h3></td></tr></table>
<ul>
<li>   DelugeImgDesc imgDesc[3]
<li>   uint8_t curImage
<li>   uint8_t state
<li>   uint16_t crc
<li>   void verifyNextPage(void)
</ul>

<table BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<tr BGCOLOR="#CCCCFF"><td>
<h3>Function Index</h3></td></tr></table>
<ul>
<li>
        command result_t     <a href="tos.interfaces.SplitControl.nc.html#command result_t SplitControl.init(void)">
<b>SplitControl.init</b>    </a>
(void)

<li>
        command result_t     <a href="tos.interfaces.SplitControl.nc.html#command result_t SplitControl.start(void)">
<b>SplitControl.start</b>    </a>
(void)

<li>
        command result_t     <a href="tos.interfaces.SplitControl.nc.html#command result_t SplitControl.stop(void)">
<b>SplitControl.stop</b>    </a>
(void)

<li>
        void <b>signalDone</b>(void)

<li>
        result_t <b>execute</b>(void)

<li>
        event result_t     <a href="tos.interfaces.Timer.nc.html#event result_t Timer.fired(void)">
<b>Timer.fired</b>    </a>
(void)

<li>
        event void     <a href="tos.lib.Deluge.DelugeStorage.nc.html#event void DelugeStorage.loadImagesDone(result_t result)">
<b>DelugeStorage.loadImagesDone</b>    </a>
(result_t result)

<li>
        void <b>scanNextImage</b>(void)

<li>
        void <b>verifyNextPage</b>(void)

<li>
        event void     <a href="tos.lib.Deluge.DelugeMetadataStore.nc.html#event void MetadataStore.readDone(storage_result_t result)">
<b>MetadataStore.readDone</b>    </a>
(storage_result_t result)

<li>
        event void     <a href="tos.lib.Deluge.DelugeDataRead.nc.html#event void DataRead.verifyDone(storage_result_t result, bool isValid)">
<b>DataRead.verifyDone</b>    </a>
(storage_result_t result, bool isValid)

<li>
        event void     <a href="tos.lib.Deluge.DelugeDataWrite.nc.html#event void DataWrite.commitDone(storage_result_t result)">
<b>DataWrite.commitDone</b>    </a>
(storage_result_t result)

<li>
        command bool     <a href="tos.lib.Deluge.DelugeMetadata.nc.html#command bool Metadata.isImgDescValid(DelugeImgDesc *tmpImgDesc)">
<b>Metadata.isImgDescValid</b>    </a>
(DelugeImgDesc *tmpImgDesc)

<li>
        command imgvnum_t     <a href="tos.lib.Deluge.DelugeStats.nc.html#command imgvnum_t DelugeStats.getVNum(imgnum_t imgNum)">
<b>DelugeStats.getVNum</b>    </a>
(imgnum_t imgNum)

<li>
        command pgnum_t     <a href="tos.lib.Deluge.DelugeStats.nc.html#command pgnum_t DelugeStats.getNumPgs(imgnum_t imgNum)">
<b>DelugeStats.getNumPgs</b>    </a>
(imgnum_t imgNum)

<li>
        command pgnum_t     <a href="tos.lib.Deluge.DelugeStats.nc.html#command pgnum_t DelugeStats.getNumPgsComplete(imgnum_t imgNum)">
<b>DelugeStats.getNumPgsComplete</b>    </a>
(imgnum_t imgNum)

<li>
        command result_t     <a href="tos.lib.Deluge.DelugeMetadata.nc.html#command result_t Metadata.receivedPage(imgnum_t imgNum, pgnum_t pgNum)">
<b>Metadata.receivedPage</b>    </a>
(imgnum_t imgNum, pgnum_t pgNum)

<li>
        command result_t     <a href="tos.lib.Deluge.DelugeMetadata.nc.html#command result_t Metadata.setupNewImage(DelugeImgDesc *newImgDesc)">
<b>Metadata.setupNewImage</b>    </a>
(DelugeImgDesc *newImgDesc)

<li>
        command DelugeImgDesc     <a href="tos.lib.Deluge.DelugeMetadata.nc.html#command DelugeImgDesc Metadata.getImgDesc(uint8_t imgNum)">
<b>Metadata.getImgDesc</b>    </a>
(uint8_t imgNum)

<li>
        event void     <a href="tos.lib.Flash.FlashWP.nc.html#event void FlashWP.clrWPDone(void)">
<b>FlashWP.clrWPDone</b>    </a>
(void)

<li>
        event void     <a href="tos.lib.Flash.FlashWP.nc.html#event void FlashWP.setWPDone(void)">
<b>FlashWP.setWPDone</b>    </a>
(void)

<li>
        event void     <a href="tos.lib.Deluge.DelugeDataWrite.nc.html#event void DataWrite.eraseDone(storage_result_t result)">
<b>DataWrite.eraseDone</b>    </a>
(storage_result_t result)

<li>
        event void     <a href="tos.lib.Deluge.DelugeMetadataStore.nc.html#event void MetadataStore.writeDone(storage_result_t result)">
<b>MetadataStore.writeDone</b>    </a>
(storage_result_t result)

<li>
        event void     <a href="tos.lib.Deluge.DelugeDataRead.nc.html#event void DataRead.readDone(storage_result_t result)">
<b>DataRead.readDone</b>    </a>
(storage_result_t result)

<li>
        event void     <a href="tos.lib.Deluge.DelugeDataWrite.nc.html#event void DataWrite.writeDone(storage_result_t result)">
<b>DataWrite.writeDone</b>    </a>
(storage_result_t result)

<li>
         event void     <a href="tos.lib.Deluge.DelugeMetadata.nc.html# event void Metadata.updateDone(result_t result)">
<b>Metadata.updateDone</b>    </a>
(result_t result)

</ul>

